<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPN 计算器使用手册</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        h2 {
            color: #667eea;
            margin-top: 30px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }
        
        h3 {
            color: #764ba2;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        p {
            margin-bottom: 15px;
        }
        
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #e83e8c;
        }
        
        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        pre code {
            background: none;
            color: #f8f8f2;
            padding: 0;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
        }
        
        td {
            padding: 10px 12px;
            border-bottom: 1px solid #ddd;
        }
        
        tr:hover {
            background: #f5f5f5;
        }
        
        .example {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 15px 0;
        }
        
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
        }
        
        .success {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
        }
        
        .info {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 15px 0;
        }
        
        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }
        
        li {
            margin-bottom: 8px;
        }
        
        .toc {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 30px;
        }
        
        .toc h3 {
            color: #667eea;
            margin-top: 0;
        }
        
        .toc ul {
            list-style: none;
            margin-left: 0;
        }
        
        .toc a {
            color: #667eea;
            text-decoration: none;
        }
        
        .toc a:hover {
            text-decoration: underline;
        }
        
        footer {
            background: #2d2d2d;
            color: white;
            text-align: center;
            padding: 20px;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 0.85em;
            font-weight: bold;
            margin-left: 5px;
        }
        
        .badge-success {
            background: #28a745;
            color: white;
        }
        
        .badge-info {
            background: #17a2b8;
            color: white;
        }
        
        .badge-warning {
            background: #ffc107;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🧮 RPN 计算器使用手册</h1>
            <p>逆波兰表示法计算器 - 功能完整版</p>
            <p style="font-size: 0.9em; margin-top: 10px;">版本 v1.0 | C++11 实现</p>
        </header>
        
        <div class="content">
            <div class="toc">
                <h3>📑 目录</h3>
                <ul>
                    <li><a href="#intro">1. 项目概述</a></li>
                    <li><a href="#install">2. 安装和编译</a></li>
                    <li><a href="#usage">3. 基本使用</a></li>
                    <li><a href="#operators">4. 支持的操作</a></li>
                    <li><a href="#examples">5. 详细示例</a></li>
                    <li><a href="#errors">6. 错误处理</a></li>
                    <li><a href="#advanced">7. 进阶技巧</a></li>
                    <li><a href="#faq">8. 常见问题</a></li>
                </ul>
            </div>
            
            <h2 id="intro">1. 项目概述</h2>
            <p>这是一个功能完整的<strong>逆波兰表示法（Reverse Polish Notation, RPN）计算器</strong>，使用C++编写。RPN是一种无需括号的数学表达式表示方法，操作符位于操作数之后。</p>
            
            <div class="info">
                <strong>🎯 主要特性：</strong>
                <ul>
                    <li>✅ 支持基本四则运算</li>
                    <li>✅ 支持高级数学函数（平方根、幂运算、三角函数）</li>
                    <li>✅ 特殊功能：斐波那契数列、杨辉三角</li>
                    <li>✅ 完善的错误处理机制</li>
                    <li>✅ 计算历史记录</li>
                    <li>✅ 交互式命令行界面</li>
                </ul>
            </div>
            
            <h3>什么是RPN？</h3>
            <p>在逆波兰表示法中，运算符跟在操作数后面。例如：</p>
            <table>
                <tr>
                    <th>中缀表达式</th>
                    <th>RPN表达式</th>
                    <th>结果</th>
                </tr>
                <tr>
                    <td><code>5 + 3</code></td>
                    <td><code>5 3 +</code></td>
                    <td>8</td>
                </tr>
                <tr>
                    <td><code>(5 + 3) * 2</code></td>
                    <td><code>5 3 + 2 *</code></td>
                    <td>16</td>
                </tr>
                <tr>
                    <td><code>15 / (7 - 5)</code></td>
                    <td><code>15 7 5 - /</code></td>
                    <td>7.5</td>
                </tr>
            </table>
            
            <div class="example">
                <strong>💡 计算过程示例：</strong><br>
                对于表达式 <code>5 3 + 2 *</code>：
                <ol>
                    <li>将 5 压入栈 → 栈: [5]</li>
                    <li>将 3 压入栈 → 栈: [5, 3]</li>
                    <li>遇到 +，弹出 3 和 5，计算 5+3=8，将 8 压入栈 → 栈: [8]</li>
                    <li>将 2 压入栈 → 栈: [8, 2]</li>
                    <li>遇到 *，弹出 2 和 8，计算 8*2=16，将 16 压入栈 → 栈: [16]</li>
                    <li>最终结果: 16</li>
                </ol>
            </div>
            
            <h2 id="install">2. 安装和编译指南</h2>
            
            <h3>系统要求</h3>
            <ul>
                <li>C++编译器 (GCC 5.0+ 或 Clang 3.5+)</li>
                <li>操作系统: Linux, macOS, 或 Windows</li>
            </ul>
            
            <h3>Linux/Ubuntu 编译步骤</h3>
            <pre><code># 进入项目目录
cd ~/Work/rpn_calc

# 编译源代码
g++ rpn_calc.cpp -o rpn_calc -std=c++11

# 运行程序
./rpn_calc</code></pre>
            
            <h3>编译选项说明</h3>
            <table>
                <tr>
                    <th>选项</th>
                    <th>说明</th>
                </tr>
                <tr>
                    <td><code>-std=c++11</code></td>
                    <td>使用C++11标准</td>
                </tr>
                <tr>
                    <td><code>-o rpn_calc</code></td>
                    <td>指定输出文件名</td>
                </tr>
                <tr>
                    <td><code>-O2</code> (可选)</td>
                    <td>开启优化</td>
                </tr>
            </table>
            
            <h2 id="usage">3. 基本使用</h2>
            
            <h3>启动程序</h3>
            <pre><code>./rpn_calc</code></pre>
            
            <p>运行后会看到欢迎界面：</p>
            <pre><code>==================================
    C++ RPN 计算器 v1.0
==================================
输入表达式 (例: '5 5 +'), 或 'help' 查看帮助, 'q' 退出.
></code></pre>
            
            <div class="success">
                <strong>✅ 快速上手示例：</strong>
                <pre><code>> 5 5 +
结果: 10.000000

> 1 2 + 3 + 7 7 * +
结果: 55.000000</code></pre>
            </div>
            
            <h2 id="operators">4. 支持的操作</h2>
            
            <h3>基本算术运算</h3>
            <table>
                <tr>
                    <th>操作符</th>
                    <th>说明</th>
                    <th>示例</th>
                    <th>结果</th>
                </tr>
                <tr>
                    <td><code>+</code></td>
                    <td>加法</td>
                    <td><code>5 3 +</code></td>
                    <td>8</td>
                </tr>
                <tr>
                    <td><code>-</code></td>
                    <td>减法</td>
                    <td><code>10 3 -</code></td>
                    <td>7</td>
                </tr>
                <tr>
                    <td><code>*</code></td>
                    <td>乘法</td>
                    <td><code>4 5 *</code></td>
                    <td>20</td>
                </tr>
                <tr>
                    <td><code>/</code></td>
                    <td>除法</td>
                    <td><code>20 4 /</code></td>
                    <td>5</td>
                </tr>
            </table>
            
            <h3>高级数学函数</h3>
            <table>
                <tr>
                    <th>操作符</th>
                    <th>说明</th>
                    <th>示例</th>
                    <th>结果</th>
                </tr>
                <tr>
                    <td><code>sqrt</code></td>
                    <td>平方根</td>
                    <td><code>16 sqrt</code></td>
                    <td>4</td>
                </tr>
                <tr>
                    <td><code>pow</code></td>
                    <td>幂运算</td>
                    <td><code>2 10 pow</code></td>
                    <td>1024</td>
                </tr>
                <tr>
                    <td><code>sin</code></td>
                    <td>正弦（弧度）</td>
                    <td><code>1.5708 sin</code></td>
                    <td>1.0</td>
                </tr>
                <tr>
                    <td><code>cos</code></td>
                    <td>余弦（弧度）</td>
                    <td><code>0 cos</code></td>
                    <td>1.0</td>
                </tr>
                <tr>
                    <td><code>tan</code></td>
                    <td>正切（弧度）</td>
                    <td><code>0.7854 tan</code></td>
                    <td>1.0</td>
                </tr>
            </table>
            
            <h3>特殊操作符 <span class="badge badge-success">高级功能</span></h3>
            
            <h4>斐波那契数列 (fib)</h4>
            <p>计算斐波那契数列的第n项（从0开始）。</p>
            <div class="example">
                <strong>使用方法：</strong> <code>n fib</code>
                <pre><code>> 10 fib
结果: 55.000000

> 15 fib
结果: 610.000000</code></pre>
                <p><strong>斐波那契数列：</strong> 0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144...</p>
            </div>
            
            <h4>杨辉三角 (pascal)</h4>
            <p>计算杨辉三角（帕斯卡三角形）中第n行第k列的值，即组合数C(n,k)。</p>
            <div class="example">
                <strong>使用方法：</strong> <code>n k pascal</code>
                <pre><code>> 5 2 pascal
结果: 10.000000

> 10 5 pascal
结果: 252.000000</code></pre>
                <p><strong>杨辉三角示例：</strong></p>
                <pre><code>        1
       1 1
      1 2 1
     1 3 3 1
    1 4 6 4 1
   1 5 10 10 5 1</code></pre>
                <p>C(5,2) = 10 表示第5行第2列的值</p>
            </div>
            
            <h3>栈操作命令</h3>
            <table>
                <tr>
                    <th>命令</th>
                    <th>说明</th>
                </tr>
                <tr>
                    <td><code>display</code></td>
                    <td>显示当前栈内容</td>
                </tr>
                <tr>
                    <td><code>clear</code></td>
                    <td>清空栈</td>
                </tr>
            </table>
            
            <h3>其他命令</h3>
            <table>
                <tr>
                    <th>命令</th>
                    <th>说明</th>
                </tr>
                <tr>
                    <td><code>help</code> 或 <code>h</code></td>
                    <td>显示帮助信息</td>
                </tr>
                <tr>
                    <td><code>history</code></td>
                    <td>显示计算历史</td>
                </tr>
                <tr>
                    <td><code>q</code>, <code>quit</code>, <code>exit</code></td>
                    <td>退出程序</td>
                </tr>
            </table>
            
            <h2 id="examples">5. 详细使用示例</h2>
            
            <h3>示例1: 四则运算组合</h3>
            <pre><code>> 15 7 1 1 + - / 3 * 2 1 1 + + -
结果: 5.000000</code></pre>
            <div class="info">
                <strong>计算过程：</strong>
                <ul>
                    <li><code>15 7 1 1 + - /</code> → 15 / (7-(1+1)) = 15 / 5 = 3</li>
                    <li><code>3 3 *</code> → 9</li>
                    <li><code>2 1 1 + +</code> → 4</li>
                    <li><code>9 4 -</code> → 5</li>
                </ul>
            </div>
            
            <h3>示例2: 使用三角函数</h3>
            <pre><code>> 3.14159 2 / sin
结果: 1.000000

> 0 cos
结果: 1.000000</code></pre>
            
            <h3>示例3: 幂运算</h3>
            <pre><code>> 2 8 pow
结果: 256.000000

> 5 3 pow
结果: 125.000000</code></pre>
            
            <h3>示例4: 斐波那契数列计算</h3>
            <pre><code>> 20 fib
结果: 6765.000000

> 0 fib
结果: 0.000000

> 1 fib
结果: 1.000000</code></pre>
            
            <h3>示例5: 杨辉三角计算</h3>
            <pre><code>> 10 3 pascal
结果: 120.000000

> 6 3 pascal
结果: 20.000000</code></pre>
            
            <h3>示例6: 使用栈操作</h3>
            <pre><code>> 5 3 display
当前栈内容 (栈顶 -> 栈底): 3 5

> + display
当前栈内容 (栈顶 -> 栈底): 8

> clear
栈已清空</code></pre>
            
            <h2 id="errors">6. 错误处理</h2>
            
            <h3>错误代码和说明</h3>
            <table>
                <tr>
                    <th>错误类型</th>
                    <th>错误信息</th>
                    <th>原因</th>
                    <th>解决方法</th>
                </tr>
                <tr>
                    <td>栈空错误</td>
                    <td><code>错误: 栈为空</code></td>
                    <td>操作数不足</td>
                    <td>确保有足够的操作数</td>
                </tr>
                <tr>
                    <td>除零错误</td>
                    <td><code>错误: 除数不能为零</code></td>
                    <td>除法运算中除数为0</td>
                    <td>避免除以零</td>
                </tr>
                <tr>
                    <td>格式错误</td>
                    <td><code>错误: 未知操作符</code></td>
                    <td>输入了不支持的操作符</td>
                    <td>检查拼写和支持的操作符列表</td>
                </tr>
                <tr>
                    <td>负数开方</td>
                    <td><code>错误: 负数没有实数平方根</code></td>
                    <td>对负数求平方根</td>
                    <td>使用非负数</td>
                </tr>
                <tr>
                    <td>参数错误</td>
                    <td><code>错误: 斐波那契数列索引必须非负</code></td>
                    <td>fib操作的参数为负数</td>
                    <td>使用非负整数</td>
                </tr>
                <tr>
                    <td>参数错误</td>
                    <td><code>错误: 杨辉三角参数无效</code></td>
                    <td>pascal操作的参数不合法</td>
                    <td>确保 0 ≤ k ≤ n</td>
                </tr>
            </table>
            
            <h3>错误示例</h3>
            <div class="warning">
                <pre><code>> 5 0 /
错误: 除数不能为零

> +
错误: 栈为空

> 5 abc
错误: 未知操作符 'abc'

> -16 sqrt
错误: 负数没有实数平方根

> -5 fib
错误: 斐波那契数列索引必须非负</code></pre>
            </div>
            
            <h2 id="advanced">7. 进阶技巧</h2>
            
            <h3>1. 批量计算</h3>
            <p>可以在一行中输入多个完整的计算：</p>
            <pre><code>> 5 5 + 10 10 + *
结果: 200.000000</code></pre>
            
            <h3>2. 使用历史记录</h3>
            <pre><code>> 5 3 +
结果: 8.000000

> 10 2 *
结果: 20.000000

> history
=== 计算历史 ===
1. 5 3 + = 8.000000
2. 10 2 * = 20.000000</code></pre>
            
            <h3>3. 组合高级功能</h3>
            <p><strong>计算斐波那契数列的平方：</strong></p>
            <pre><code>> 10 fib 2 pow
结果: 3025.000000</code></pre>
            
            <p><strong>计算组合数的和：</strong></p>
            <pre><code>> 5 2 pascal 5 3 pascal +
结果: 20.000000</code></pre>
            
            <h3>最佳实践</h3>
            <ol>
                <li><strong>从简单开始</strong>：先测试基本的加减乘除，熟悉RPN语法</li>
                <li><strong>使用display命令</strong>：在复杂计算中使用 <code>display</code> 查看栈状态</li>
                <li><strong>分步计算</strong>：将复杂表达式分解成多个简单步骤</li>
                <li><strong>检查输入</strong>：确保每个操作符有足够的操作数</li>
                <li><strong>使用clear</strong>：出错后使用 <code>clear</code> 清空栈重新开始</li>
            </ol>
            
            <h2 id="faq">8. 常见问题</h2>
            
            <h3>Q: 为什么我的结果是小数而不是整数？</h3>
            <p>A: 计算器内部使用双精度浮点数（double），所有结果都显示为浮点格式。</p>
            
            <h3>Q: 如何输入负数？</h3>
            <p>A: 直接输入负号和数字，如 <code>-5 3 +</code></p>
            
            <h3>Q: 三角函数使用什么单位？</h3>
            <p>A: 所有三角函数使用<strong>弧度</strong>作为输入单位。90度 = π/2 ≈ 1.5708 弧度</p>
            
            <h3>Q: fib和pascal操作符有什么实际用途？</h3>
            <p>A:</p>
            <ul>
                <li><strong>fib</strong>: 斐波那契数列在自然界、艺术和计算机科学中有广泛应用</li>
                <li><strong>pascal</strong>: 杨辉三角用于组合数学、概率论和二项式展开</li>
            </ul>
            
            <h3>Q: 计算器支持的最大数字是多少？</h3>
            <p>A: 受限于double类型，约为 ±1.7 × 10<sup>308</sup></p>
            
            <hr style="margin: 30px 0; border: none; border-top: 2px solid #eee;">
            
            <h2>技术细节</h2>
            
            <h3>实现原理</h3>
            <ul>
                <li>使用STL的 <code>stack</code> 容器实现数据栈</li>
                <li>使用 <code>stringstream</code> 进行输入解析</li>
                <li>异常处理机制保证程序健壮性</li>
            </ul>
            
            <h3>性能特点</h3>
            <ul>
                <li><strong>时间复杂度</strong>: O(n)，n为token数量</li>
                <li><strong>空间复杂度</strong>: O(m)，m为最大栈深度</li>
                <li><strong>斐波那契计算</strong>: 优化为O(n)迭代算法</li>
                <li><strong>杨辉三角</strong>: 使用优化的组合数计算方法</li>
            </ul>
            
            <h2>版本更新日志</h2>
            
            <div class="success">
                <strong>v1.0 (2025-09)</strong>
                <ul>
                    <li>✅ 实现基本四则运算</li>
                    <li>✅ 实现高级数学函数（sqrt, pow, sin, cos, tan）</li>
                    <li>✅ 新增斐波那契数列计算 (fib操作符)</li>
                    <li>✅ 新增杨辉三角计算 (pascal操作符)</li>
                    <li>✅ 完善错误处理机制</li>
                    <li>✅ 添加计算历史记录功能</li>
                    <li>✅ 优化用户界面和帮助信息</li>
                </ul>
            </div>
        </div>
